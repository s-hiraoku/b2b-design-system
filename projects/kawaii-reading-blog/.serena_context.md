# Serena MCP Context: Kawaii Reading Blog

## Project Overview

**Project Name**: kawaii-reading-blog
**Type**: Modern Web Application - Reading Blog Platform
**Architecture**: Component-based React 19 + Next.js 15 with TDD methodology
**Primary Language**: TypeScript 5.x with strict configuration
**Development Mode**: test_driven_development

## TDD Development Standards

### Test-Driven Development Configuration

**Framework**: Vitest + React Testing Library + Playwright E2E
**Test Structure**: AAA Pattern (Arrange-Act-Assert) with descriptive test names
**Naming Convention**: 
- Unit tests: `should_[expected_behavior]_when_[condition]_given_[context]`
- Component tests: `renders_[component]_with_[props]_correctly`
- Integration tests: `integrates_[feature]_with_[dependency]_successfully`

**Test Organization**: Co-located test files with implementation
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ kawaii/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KawaiiButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KawaiiButton.test.tsx       # Unit tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KawaiiCard.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ KawaiiCard.test.tsx
‚îÇ   ‚îî‚îÄ‚îÄ reading/
‚îÇ       ‚îú‚îÄ‚îÄ ReadingProgressChart.tsx
‚îÇ       ‚îî‚îÄ‚îÄ ReadingProgressChart.test.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useReadingProgress.ts
‚îÇ   ‚îî‚îÄ‚îÄ useReadingProgress.test.ts
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ e2e/                            # Playwright E2E tests
    ‚îú‚îÄ‚îÄ integration/                    # Integration tests
    ‚îî‚îÄ‚îÄ setup/                          # Test configuration
```

### TDD Patterns and Enforcement

**Red-Green-Refactor Cycle Enforcement**:
1. **Red Phase**: Create failing test for required functionality
2. **Green Phase**: Implement minimal code to make test pass
3. **Refactor Phase**: Improve code quality while keeping tests green

**Coverage Requirements**:
- Line Coverage: 95%+ mandatory
- Branch Coverage: 90%+ mandatory  
- Function Coverage: 95%+ mandatory
- Statement Coverage: 95%+ mandatory

**Test Utilities Configuration**:
```typescript
// Vitest configuration for kawaii components
{
  "mocking_framework": "vi.mock() with Vitest",
  "assertion_library": "expect() with Vitest + @testing-library/jest-dom",
  "test_data_patterns": "Factory pattern with MSW for API mocking",
  "setup_teardown": "beforeEach/afterEach with cleanup automation"
}
```

## Kawaii-Specific Development Patterns

### Kawaii Design System Standards

**Color Palette**: Pastel-focused with accessibility compliance
```typescript
// Primary colors with WCAG 2.1 AA contrast ratios
primary: {
  50: '#fef7f7',   // Lightest pink - backgrounds
  500: '#ef4444',  // Main pink - primary actions
  900: '#7f1d1d',  // Darkest pink - text on light backgrounds
}
secondary: {
  50: '#f0f9ff',   // Light sky blue - secondary backgrounds  
  500: '#0ea5e9',  // Main blue - secondary actions
  900: '#0c4a6e',  // Dark blue - high contrast text
}
```

**Animation Performance Standards**:
- 60FPS animations mandatory for all interactions
- GPU acceleration using `transform` and `opacity` properties
- Framer Motion with LazyMotion for bundle optimization
- Maximum animation duration: 500ms for micro-interactions

### Component Development Patterns

**Kawaii Component Structure**:
```typescript
interface KawaiiComponentProps {
  variant?: 'primary' | 'secondary' | 'accent';
  size?: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
  className?: string;
  // Animation props
  hoverEffect?: boolean;
  animationDelay?: number;
}

// TDD Pattern: Test component variants and animations
describe('KawaiiComponent', () => {
  it('should_render_primary_variant_with_correct_styles_when_variant_prop_given', () => {
    // Arrange: Setup component with primary variant
    // Act: Render component
    // Assert: Verify primary styles applied
  });
  
  it('should_trigger_hover_animation_when_mouse_enters_component', async () => {
    // Arrange: Setup component with hover effects
    // Act: Simulate mouse enter event
    // Assert: Verify animation state changes
  });
});
```

## Technology Stack Configuration

### Frontend Architecture
```yaml
framework: "Next.js 15 (App Router + Server Components)"
ui_library: "React 19 with concurrent features"
styling: "Tailwind CSS 4 with custom kawaii theme"
animations: 
  - "Framer Motion (complex interactions)"
  - "CSS3 Animations (micro-interactions)"
  - "Lottie (character animations)"
state_management: "Zustand + TanStack Query"
form_handling: "React Hook Form + Zod validation"
```

### Backend Integration
```yaml
database: "PostgreSQL (Supabase) with optimized B-tree indexes"
cache: "Redis for search results and session data" 
authentication: "NextAuth.js with social providers"
file_storage: "Cloudinary with automatic WebP/AVIF optimization"
search: "Algolia with real-time indexing"
```

### Development Workflow
```yaml
package_manager: "pnpm for performance"
code_quality: 
  - "ESLint with strict TypeScript rules"
  - "Prettier for consistent formatting"
  - "Husky pre-commit hooks"
testing_strategy:
  - "Vitest for unit/integration tests"
  - "Playwright for E2E scenarios"
  - "MSW for API mocking"
deployment: "Vercel with automatic preview deployments"
```

## Performance Optimization Standards

### Kawaii Animation Performance
```typescript
// GPU-accelerated animations only
const kawaiiAnimations = {
  // ‚úÖ Performant - uses transform
  bounce: {
    whileHover: { 
      scale: 1.05, 
      y: -2,
      transition: { type: "spring", stiffness: 400, damping: 17 }
    }
  },
  
  // ‚úÖ Performant - uses opacity
  fadeIn: {
    initial: { opacity: 0 },
    animate: { opacity: 1 },
    transition: { duration: 0.3 }
  }
};

// ‚ùå Avoid - causes layout recalculation
// width, height, top, left, margin, padding changes
```

### Bundle Optimization
- **Code Splitting**: Route-based + component-based dynamic imports
- **Image Optimization**: Next.js Image with WebP/AVIF + Cloudinary CDN
- **Font Optimization**: next/font with preload hints
- **Critical CSS**: Above-the-fold styling extraction

### Performance Budgets
```yaml
first_contentful_paint: "< 2.0s"
largest_contentful_paint: "< 3.0s" 
first_input_delay: "< 100ms"
cumulative_layout_shift: "< 0.1"
time_to_interactive: "< 5.0s"
bundle_size: "< 250KB gzipped"
```

## Quality Assurance Framework

### Testing Pyramid Strategy
```
    E2E Tests (10%)
      ‚Üë Critical user flows
      ‚Üë Cross-browser compatibility
      
  Integration Tests (20%) 
    ‚Üë Component integration
    ‚Üë API endpoint testing
    ‚Üë Database operations
    
Unit Tests (70%)
  ‚Üë Component behavior
  ‚Üë Hook functionality  
  ‚Üë Utility functions
  ‚Üë Business logic
```

### Accessibility Standards
- **WCAG 2.1 AA Compliance**: Mandatory for all components
- **Keyboard Navigation**: Tab order and focus management
- **Screen Reader Support**: ARIA labels and semantic HTML
- **Color Contrast**: 4.5:1 minimum ratio for normal text

### Error Handling Patterns
```typescript
// Kawaii-themed error boundaries
<KawaiiErrorBoundary fallback={<CuteErrorMessage />}>
  <ReadingProgressChart />
</KawaiiErrorBoundary>

// User-friendly error messages
const errorMessages = {
  network: "„Åä„Å£„Å®ÔºÅ„Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÊé•Á∂ö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ üåê",
  validation: "ÂÖ•ÂäõÂÜÖÂÆπ„Çí„ÇÇ„ÅÜ‰∏ÄÂ∫¶Á¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ ‚ú®", 
  server: "„Çµ„Éº„Éê„Éº„ÅßÂïèÈ°å„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇÂ∞ë„ÅóÂæÖ„Å£„Å¶„Åã„Çâ„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ üîß"
};
```

## Project Implementation Guidelines

### File Structure Standards
```
projects/kawaii-reading-blog/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                     # Next.js 15 app directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/             # Route groups
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/        
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css         # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kawaii/             # Design system components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reading/            # Reading-specific components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ blog/               # Blog-related components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                 # Base UI components
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ lib/                    # Utility libraries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ animations/         # Animation helpers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation/         # Zod schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ styles/                 # CSS modules and themes
‚îÇ   ‚îú‚îÄ‚îÄ types/                  # TypeScript type definitions
‚îÇ   ‚îî‚îÄ‚îÄ tests/                  # Test utilities and setup
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ next.config.js
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ vitest.config.ts
‚îî‚îÄ‚îÄ playwright.config.ts
```

### Code Quality Standards
```typescript
// TypeScript strict configuration
{
  "strict": true,
  "noUncheckedIndexedAccess": true,
  "exactOptionalPropertyTypes": true,
  "noImplicitReturns": true,
  "noFallthroughCasesInSwitch": true
}

// Component prop validation
interface StrictKawaiiProps {
  variant: 'primary' | 'secondary' | 'accent'; // No optional for critical props
  children: React.ReactNode;
  className?: string; // Optional only when sensible defaults exist
  'data-testid'?: string; // For testing integration
}
```

### Development Workflow Standards
1. **Feature Branch Strategy**: feature/kawaii-[component-name]
2. **Commit Convention**: feat(kawaii): add bouncing heart animation to like button
3. **PR Requirements**: 
   - All tests passing (95%+ coverage)
   - Lighthouse score > 90
   - Accessibility audit passed
   - Visual regression tests approved

## Context Summary

This Serena context establishes kawaii-reading-blog as a high-performance, accessibility-compliant reading blog platform with mandatory TDD methodology. All components must follow kawaii design principles with 60FPS animations, strict TypeScript configuration, and comprehensive testing coverage. The development process enforces Red-Green-Refactor cycles with performance budgets and quality gates at every stage.

Ready for kawaii-focused, test-driven development with performance and accessibility as core requirements.