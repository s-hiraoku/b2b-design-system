# Serena MCP Context: Kawaii Reading Blog

## Project Overview

**Project Name**: kawaii-reading-blog
**Type**: Modern Web Application - Reading Blog Platform
**Architecture**: Component-based React 19 + Next.js 15 with TDD methodology
**Primary Language**: TypeScript 5.x with strict configuration
**Development Mode**: test_driven_development

## TDD Development Standards

### Test-Driven Development Configuration

**Framework**: Vitest + React Testing Library + Playwright E2E
**Test Structure**: AAA Pattern (Arrange-Act-Assert) with descriptive test names
**Naming Convention**: 
- Unit tests: `should_[expected_behavior]_when_[condition]_given_[context]`
- Component tests: `renders_[component]_with_[props]_correctly`
- Integration tests: `integrates_[feature]_with_[dependency]_successfully`

**Test Organization**: Co-located test files with implementation
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ kawaii/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KawaiiButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KawaiiButton.test.tsx       # Unit tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KawaiiCard.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ KawaiiCard.test.tsx
‚îÇ   ‚îî‚îÄ‚îÄ reading/
‚îÇ       ‚îú‚îÄ‚îÄ ReadingProgressChart.tsx
‚îÇ       ‚îî‚îÄ‚îÄ ReadingProgressChart.test.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useReadingProgress.ts
‚îÇ   ‚îî‚îÄ‚îÄ useReadingProgress.test.ts
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ e2e/                            # Playwright E2E tests
    ‚îú‚îÄ‚îÄ integration/                    # Integration tests
    ‚îî‚îÄ‚îÄ setup/                          # Test configuration
```

### TDD Patterns and Enforcement

**Red-Green-Refactor Cycle Enforcement**:
1. **Red Phase**: Create failing test for required functionality
2. **Green Phase**: Implement minimal code to make test pass
3. **Refactor Phase**: Improve code quality while keeping tests green

**Coverage Requirements**:
- Line Coverage: 95%+ mandatory
- Branch Coverage: 90%+ mandatory  
- Function Coverage: 95%+ mandatory
- Statement Coverage: 95%+ mandatory

**Test Utilities Configuration**:
```typescript
// Vitest configuration for kawaii components
{
  "mocking_framework": "vi.mock() with Vitest",
  "assertion_library": "expect() with Vitest + @testing-library/jest-dom",
  "test_data_patterns": "Factory pattern with MSW for API mocking",
  "setup_teardown": "beforeEach/afterEach with cleanup automation"
}
```

## Kawaii-Specific Development Patterns

### Kawaii Design System Standards

**Color Palette**: Pastel-focused with accessibility compliance
```typescript
// Primary colors with WCAG 2.1 AA contrast ratios
primary: {
  50: '#fef7f7',   // Lightest pink - backgrounds
  500: '#ef4444',  // Main pink - primary actions
  900: '#7f1d1d',  // Darkest pink - text on light backgrounds
}
secondary: {
  50: '#f0f9ff',   // Light sky blue - secondary backgrounds  
  500: '#0ea5e9',  // Main blue - secondary actions
  900: '#0c4a6e',  // Dark blue - high contrast text
}
```

**Animation Performance Standards**:
- 60FPS animations mandatory for all interactions
- GPU acceleration using `transform` and `opacity` properties
- Framer Motion with LazyMotion for bundle optimization
- Maximum animation duration: 500ms for micro-interactions

### Component Development Patterns

**Kawaii Component Structure**:
```typescript
interface KawaiiComponentProps {
  variant?: 'primary' | 'secondary' | 'accent';
  size?: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
  className?: string;
  // Animation props
  hoverEffect?: boolean;
  animationDelay?: number;
}

// TDD Pattern: Test component variants and animations
describe('KawaiiComponent', () => {
  it('should_render_primary_variant_with_correct_styles_when_variant_prop_given', () => {
    // Arrange: Setup component with primary variant
    // Act: Render component
    // Assert: Verify primary styles applied
  });
  
  it('should_trigger_hover_animation_when_mouse_enters_component', async () => {
    // Arrange: Setup component with hover effects
    // Act: Simulate mouse enter event
    // Assert: Verify animation state changes
  });
});
```

## Technology Stack Configuration

### Frontend Architecture
```yaml
framework: "Next.js 15 (App Router + Server Components)"
ui_library: "React 19 with concurrent features"
styling: "Tailwind CSS 4 with custom kawaii theme"
animations: 
  - "Framer Motion (complex interactions)"
  - "CSS3 Animations (micro-interactions)"
  - "Lottie (character animations)"
state_management: "Zustand + TanStack Query"
form_handling: "React Hook Form + Zod validation"
```

### Backend Integration
```yaml
database: "PostgreSQL (Supabase) with optimized B-tree indexes"
cache: "Redis for search results and session data" 
authentication: "NextAuth.js with social providers"
file_storage: "Cloudinary with automatic WebP/AVIF optimization"
search: "Algolia with real-time indexing"
```

### Development Workflow
```yaml
package_manager: "pnpm for performance"
code_quality: 
  - "ESLint with strict TypeScript rules"
  - "Prettier for consistent formatting"
  - "Husky pre-commit hooks"
testing_strategy:
  - "Vitest for unit/integration tests"
  - "Playwright for E2E scenarios"
  - "MSW for API mocking"
deployment: "Vercel with automatic preview deployments"
```

## Performance Optimization Standards

### Kawaii Animation Performance
```typescript
// GPU-accelerated animations only
const kawaiiAnimations = {
  // ‚úÖ Performant - uses transform
  bounce: {
    whileHover: { 
      scale: 1.05, 
      y: -2,
      transition: { type: "spring", stiffness: 400, damping: 17 }
    }
  },
  
  // ‚úÖ Performant - uses opacity
  fadeIn: {
    initial: { opacity: 0 },
    animate: { opacity: 1 },
    transition: { duration: 0.3 }
  }
};

// ‚ùå Avoid - causes layout recalculation
// width, height, top, left, margin, padding changes
```

### Bundle Optimization
- **Code Splitting**: Route-based + component-based dynamic imports
- **Image Optimization**: Next.js Image with WebP/AVIF + Cloudinary CDN
- **Font Optimization**: next/font with preload hints
- **Critical CSS**: Above-the-fold styling extraction

### Performance Budgets
```yaml
first_contentful_paint: "< 2.0s"
largest_contentful_paint: "< 3.0s" 
first_input_delay: "< 100ms"
cumulative_layout_shift: "< 0.1"
time_to_interactive: "< 5.0s"
bundle_size: "< 250KB gzipped"
```

## Quality Assurance Framework

### Testing Pyramid Strategy
```
    E2E Tests (10%)
      ‚Üë Critical user flows
      ‚Üë Cross-browser compatibility
      
  Integration Tests (20%) 
    ‚Üë Component integration
    ‚Üë API endpoint testing
    ‚Üë Database operations
    
Unit Tests (70%)
  ‚Üë Component behavior
  ‚Üë Hook functionality  
  ‚Üë Utility functions
  ‚Üë Business logic
```

### Accessibility Standards
- **WCAG 2.1 AA Compliance**: Mandatory for all components
- **Keyboard Navigation**: Tab order and focus management
- **Screen Reader Support**: ARIA labels and semantic HTML
- **Color Contrast**: 4.5:1 minimum ratio for normal text

### Error Handling Patterns
```typescript
// Kawaii-themed error boundaries
<KawaiiErrorBoundary fallback={<CuteErrorMessage />}>
  <ReadingProgressChart />
</KawaiiErrorBoundary>

// User-friendly error messages
const errorMessages = {
  network: "„Åä„Å£„Å®ÔºÅ„Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÊé•Á∂ö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ üåê",
  validation: "ÂÖ•ÂäõÂÜÖÂÆπ„Çí„ÇÇ„ÅÜ‰∏ÄÂ∫¶Á¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ ‚ú®", 
  server: "„Çµ„Éº„Éê„Éº„ÅßÂïèÈ°å„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇÂ∞ë„ÅóÂæÖ„Å£„Å¶„Åã„Çâ„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ üîß"
};
```

## Project Implementation Guidelines

### File Structure Standards
```
projects/kawaii-reading-blog/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                     # Next.js 15 app directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/             # Route groups
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/        
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css         # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kawaii/             # Design system components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reading/            # Reading-specific components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ blog/               # Blog-related components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                 # Base UI components
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ lib/                    # Utility libraries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ animations/         # Animation helpers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation/         # Zod schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ styles/                 # CSS modules and themes
‚îÇ   ‚îú‚îÄ‚îÄ types/                  # TypeScript type definitions
‚îÇ   ‚îî‚îÄ‚îÄ tests/                  # Test utilities and setup
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ next.config.js
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ vitest.config.ts
‚îî‚îÄ‚îÄ playwright.config.ts
```

### Code Quality Standards
```typescript
// TypeScript strict configuration
{
  "strict": true,
  "noUncheckedIndexedAccess": true,
  "exactOptionalPropertyTypes": true,
  "noImplicitReturns": true,
  "noFallthroughCasesInSwitch": true
}

// Component prop validation
interface StrictKawaiiProps {
  variant: 'primary' | 'secondary' | 'accent'; // No optional for critical props
  children: React.ReactNode;
  className?: string; // Optional only when sensible defaults exist
  'data-testid'?: string; // For testing integration
}
```

### Development Workflow Standards
1. **Feature Branch Strategy**: feature/kawaii-[component-name]
2. **Commit Convention**: feat(kawaii): add bouncing heart animation to like button
3. **PR Requirements**: 
   - All tests passing (95%+ coverage)
   - Lighthouse score > 90
   - Accessibility audit passed
   - Visual regression tests approved

## Kawaii Icons Implementation Context

### Current Task: Implement Missing Kawaii Icons

**Objective**: Replace emoji usage with custom animated SVG kawaii icons to improve accessibility, performance, and visual consistency.

#### Required New Icons (TDD Implementation)

**Priority Icons for Implementation**:
1. **ClockIcon** (‚è∞) - Reading time/duration indicators
2. **FireIcon** (üî•) - Streak counters and motivation elements  
3. **PageIcon** (üìÑ) - Page counts and document indicators
4. **CalendarIcon** (üìÖ) - Weekly/monthly goal tracking
5. **TargetIcon** (üéØ) - Yearly goals and achievement targets

#### Emoji Replacement Locations
```typescript
// Components requiring icon replacements:
ReadingProgress.tsx: {
  emojis: ['üìö', 'üìñ', 'üìÑ', '‚è∞', 'üî•', 'üìÖ', 'üéØ'],
  usage: 'Progress statistics, goal indicators, motivation text'
}

BookCard.tsx: {
  emojis: ['üìö', 'üìÑ', 'üìñ'], 
  usage: 'Book metadata display, reading progress, action buttons'
}

ParticleRenderer.tsx: {
  emojis: ['‚ù§Ô∏è', '‚ú®', '‚≠ê'],
  status: 'SVG replacements exist, optimization needed'
}
```

#### TDD Implementation Pattern for Icons
```typescript
// Required test structure for each new icon
describe('[IconName]Icon', () => {
  // Animation Performance Tests
  it('should_maintain_60fps_during_animation_when_rendered')
  it('should_use_gpu_acceleration_with_transform_opacity_only')
  it('should_complete_animation_cycle_within_duration_budget')
  
  // Accessibility Tests  
  it('should_have_proper_aria_label_when_rendered')
  it('should_respect_prefers_reduced_motion_when_user_setting_enabled')
  it('should_maintain_wcag_contrast_ratios_when_styled')
  
  // Kawaii Design Tests
  it('should_render_cute_facial_features_when_animated_true')
  it('should_apply_pastel_color_scheme_when_default_props')
  it('should_show_kawaii_expression_appropriate_for_context')
  
  // Integration Tests
  it('should_replace_emoji_in_target_component_correctly')
  it('should_maintain_visual_hierarchy_when_integrated')
  it('should_preserve_click_interaction_when_interactive')
})
```

#### Icon Design Specifications

**ClockIcon Requirements**:
- Shape: Circular clock face with animated hands
- Kawaii Features: Sleepy/focused eyes, content smile
- Animation: Gentle hand rotation (3s cycle)
- Colors: Pastel blue (#93C5FD) primary, white face
- Usage Context: Reading time tracking, session duration

**FireIcon Requirements**:
- Shape: Stylized flame with flickering effect
- Kawaii Features: Determined sparkle eyes, excited expression
- Animation: Flame flicker + intensity pulsing (2s cycle)
- Colors: Orange-red gradient (#FB923C to #EF4444)
- Usage Context: Reading streaks, motivation indicators

**PageIcon Requirements**:
- Shape: Document with folded corner, readable content lines
- Kawaii Features: Attentive reading eyes, peaceful expression
- Animation: Gentle paper flutter (4s cycle)
- Colors: Cream white (#FEF3C7) with gray text lines
- Usage Context: Page counts, document references

**CalendarIcon Requirements**:
- Shape: Calendar grid with highlighted current date
- Kawaii Features: Organized happy eyes, planning smile
- Animation: Date number flip effect (gentle bounce)
- Colors: Pastel green (#86EFAC) primary, white background
- Usage Context: Goal deadlines, weekly planning

**TargetIcon Requirements**:
- Shape: Bullseye target with kawaii arrow
- Kawaii Features: Focused determined eyes, achievement smile
- Animation: Gentle pulsing + arrow wobble (3s cycle)
- Colors: Red target (#EF4444), yellow center (#FDE047)
- Usage Context: Achievement goals, target metrics

#### Performance Standards for Icons
```typescript
// Animation performance requirements
const iconPerformanceStandards = {
  frameRate: '60fps minimum during all animations',
  animationProperties: 'transform and opacity only (GPU accelerated)',
  bundleImpact: 'Each icon < 2KB gzipped',
  renderTime: 'Initial render < 16ms',
  memoryUsage: 'No memory leaks during animation cycles'
};

// Accessibility requirements
const iconA11yStandards = {
  screenReader: 'Descriptive aria-label for each icon context',
  contrastRatio: '4.5:1 minimum for all visual elements',
  reducedMotion: 'Static version when prefers-reduced-motion: reduce',
  keyboardNav: 'Focusable when interactive, proper tab order'
};
```

#### Integration Testing Strategy
```typescript
// Component integration test pattern
describe('ReadingProgress with KawaiiIcons', () => {
  it('should_replace_all_emojis_with_kawaii_icons_when_rendered', () => {
    render(<ReadingProgress stats={mockStats} />)
    
    // Verify emoji removal
    expect(screen.queryByText('üìö')).not.toBeInTheDocument()
    expect(screen.queryByText('‚è∞')).not.toBeInTheDocument()
    
    // Verify kawaii icon presence
    expect(screen.getByLabelText('Reading progress books')).toBeInTheDocument()
    expect(screen.getByLabelText('Reading time clock')).toBeInTheDocument()
  })
  
  it('should_maintain_visual_consistency_when_icons_animated', async () => {
    const { container } = render(<ReadingProgress stats={mockStats} />)
    
    // Test animation coordination
    const icons = container.querySelectorAll('.kawaii-icon')
    icons.forEach(icon => {
      expect(icon).toHaveStyle('will-change: transform, opacity')
    })
  })
})
```

#### Quality Gates for Icon Implementation
- ‚úÖ **TDD Compliance**: All icons developed with Red-Green-Refactor
- ‚úÖ **Performance**: 60FPS animation performance maintained
- ‚úÖ **Accessibility**: WCAG 2.1 AA compliance verified
- ‚úÖ **Visual Consistency**: Kawaii design language maintained
- ‚úÖ **Test Coverage**: 95%+ line/function coverage achieved
- ‚úÖ **Integration**: Seamless emoji replacement in target components

## Context Summary

This Serena context establishes kawaii-reading-blog as a high-performance, accessibility-compliant reading blog platform with mandatory TDD methodology. Current focus is implementing 5 custom kawaii icons (ClockIcon, FireIcon, PageIcon, CalendarIcon, TargetIcon) to replace emoji usage in ReadingProgress and BookCard components. All components must follow kawaii design principles with 60FPS animations, strict TypeScript configuration, and comprehensive testing coverage. The development process enforces Red-Green-Refactor cycles with performance budgets and quality gates at every stage.

Ready for kawaii icons TDD implementation with emoji replacement as immediate priority.