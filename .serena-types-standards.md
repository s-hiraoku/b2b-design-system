# TypeScript Types & Coding Standards for tech-blog-website

## Core Type Definitions

### Article Types
```typescript
// Core article entity
export interface Article {
  id: string
  title: string
  slug: string
  content: string
  excerpt?: string
  status: ArticleStatus
  publishedAt?: string
  authorId: string
  categoryId?: string
  metaTitle?: string
  metaDescription?: string
  ogImage?: string
  featuredImage?: string
  readTime: number
  viewCount: number
  createdAt: string
  updatedAt: string
  tags: Tag[]
  category?: Category
  author: User
}

export type ArticleStatus = 'draft' | 'published'

export interface CreateArticleRequest {
  title: string
  content: string
  excerpt?: string
  status: ArticleStatus
  tags?: string[]
  categoryId?: string
  metaDescription?: string
  featuredImage?: string
}

export interface UpdateArticleRequest extends Partial<CreateArticleRequest> {
  publishedAt?: string
}
```

### User & Auth Types
```typescript
export interface User {
  id: string
  email: string
  name?: string
  bio?: string
  avatarUrl?: string
  website?: string
  createdAt: string
  updatedAt: string
}

export interface AuthSession {
  user: User
  accessToken: string
  refreshToken: string
  expiresAt: number
}

export interface AuthContextValue {
  user: User | null
  session: AuthSession | null
  login: (email: string, password: string) => Promise<void>
  logout: () => Promise<void>
  isLoading: boolean
  isAuthenticated: boolean
}
```

### Content Management Types
```typescript
export interface Category {
  id: string
  name: string
  slug: string
  description?: string
  color: string
  createdAt: string
}

export interface Tag {
  id: string
  name: string
  slug: string
  description?: string
  createdAt: string
}

export interface Comment {
  id: string
  postId: string
  authorName: string
  authorEmail: string
  content: string
  status: CommentStatus
  parentId?: string
  createdAt: string
  replies?: Comment[]
}

export type CommentStatus = 'pending' | 'approved' | 'spam'
```

### Editor Types
```typescript
export interface MarkdownEditorProps {
  value: string
  onChange: (value: string) => void
  onImageUpload?: (file: File) => Promise<string>
  autoSave?: boolean
  autoSaveInterval?: number
  readOnly?: boolean
  placeholder?: string
  height?: string | number
  previewMode?: 'edit' | 'preview' | 'live'
}

export interface ImageUploadResult {
  url: string
  publicUrl: string
  filename: string
  size: number
  mimeType: string
}

export interface EditorHistory {
  undo: () => void
  redo: () => void
  canUndo: boolean
  canRedo: boolean
}
```

### API Response Types
```typescript
export interface ApiResponse<T = any> {
  data?: T
  error?: ApiError
  message?: string
  success: boolean
}

export interface ApiError {
  code: string
  message: string
  details?: Record<string, any>
}

export interface PaginatedResponse<T> {
  data: T[]
  pagination: {
    page: number
    limit: number
    total: number
    totalPages: number
    hasNext: boolean
    hasPrev: boolean
  }
}

export interface SearchResult {
  articles: Article[]
  categories: Category[]
  tags: Tag[]
  total: number
  query: string
}
```

### SEO & Analytics Types
```typescript
export interface SEOMetadata {
  title: string
  description: string
  keywords?: string[]
  ogImage?: string
  ogType?: 'article' | 'website'
  twitterCard?: 'summary' | 'summary_large_image'
  canonicalUrl?: string
  structuredData?: Record<string, any>
}

export interface ArticleAnalytics {
  id: string
  postId: string
  date: string
  views: number
  uniqueViews: number
  avgReadTime: number
  bounceRate: number
}

export interface SitemapEntry {
  url: string
  lastModified: string
  changeFreq: 'daily' | 'weekly' | 'monthly'
  priority: number
}
```

## React Component Type Patterns

### Props Interface Standards
```typescript
// Base component props
interface BaseComponentProps {
  className?: string
  children?: React.ReactNode
  'data-testid'?: string
}

// Form component props
interface FormComponentProps<T = any> extends BaseComponentProps {
  value: T
  onChange: (value: T) => void
  error?: string
  disabled?: boolean
  required?: boolean
}

// List component props
interface ListComponentProps<T> extends BaseComponentProps {
  items: T[]
  renderItem: (item: T, index: number) => React.ReactNode
  loading?: boolean
  error?: string
  emptyMessage?: string
}

// Modal component props
interface ModalProps extends BaseComponentProps {
  isOpen: boolean
  onClose: () => void
  title?: string
  size?: 'sm' | 'md' | 'lg' | 'xl'
}
```

### Hook Return Types
```typescript
// Custom hook return types
export interface UseArticleReturn {
  article: Article | null
  loading: boolean
  error: string | null
  updateArticle: (updates: Partial<Article>) => Promise<void>
  deleteArticle: () => Promise<void>
  publishArticle: () => Promise<void>
  draftArticle: () => Promise<void>
}

export interface UseArticlesReturn {
  articles: Article[]
  loading: boolean
  error: string | null
  pagination: {
    page: number
    totalPages: number
    hasNext: boolean
    hasPrev: boolean
  }
  refetch: () => Promise<void>
  loadMore: () => Promise<void>
}

export interface UseSearchReturn {
  results: SearchResult | null
  loading: boolean
  error: string | null
  search: (query: string) => Promise<void>
  clearSearch: () => void
}
```

## Error Handling Types

### Error Type Hierarchy
```typescript
export enum ErrorCode {
  // Authentication errors
  UNAUTHORIZED = 'UNAUTHORIZED',
  FORBIDDEN = 'FORBIDDEN',
  TOKEN_EXPIRED = 'TOKEN_EXPIRED',
  
  // Validation errors
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  REQUIRED_FIELD = 'REQUIRED_FIELD',
  INVALID_FORMAT = 'INVALID_FORMAT',
  
  // Resource errors
  NOT_FOUND = 'NOT_FOUND',
  DUPLICATE_ERROR = 'DUPLICATE_ERROR',
  CONFLICT = 'CONFLICT',
  
  // System errors
  INTERNAL_ERROR = 'INTERNAL_ERROR',
  DATABASE_ERROR = 'DATABASE_ERROR',
  NETWORK_ERROR = 'NETWORK_ERROR',
  
  // File errors
  FILE_TOO_LARGE = 'FILE_TOO_LARGE',
  INVALID_FILE_TYPE = 'INVALID_FILE_TYPE',
  UPLOAD_FAILED = 'UPLOAD_FAILED'
}

export class AppError extends Error {
  constructor(
    public code: ErrorCode,
    public message: string,
    public statusCode: number = 500,
    public details?: Record<string, any>
  ) {
    super(message)
    this.name = 'AppError'
  }
}

export interface ErrorBoundaryState {
  hasError: boolean
  error?: Error
  errorInfo?: React.ErrorInfo
}
```

## Validation Schemas (Zod)

### Article Validation
```typescript
import { z } from 'zod'

export const createArticleSchema = z.object({
  title: z.string()
    .min(1, 'Title is required')
    .max(200, 'Title must be less than 200 characters'),
  content: z.string()
    .min(1, 'Content is required')
    .max(50000, 'Content must be less than 50,000 characters'),
  excerpt: z.string()
    .max(500, 'Excerpt must be less than 500 characters')
    .optional(),
  status: z.enum(['draft', 'published']),
  tags: z.array(z.string())
    .max(10, 'Maximum 10 tags allowed')
    .optional(),
  categoryId: z.string().uuid().optional(),
  metaDescription: z.string()
    .max(160, 'Meta description must be less than 160 characters')
    .optional(),
  featuredImage: z.string().url().optional()
})

export const updateArticleSchema = createArticleSchema.partial()

export type CreateArticleInput = z.infer<typeof createArticleSchema>
export type UpdateArticleInput = z.infer<typeof updateArticleSchema>
```

### User Validation
```typescript
export const userProfileSchema = z.object({
  name: z.string()
    .min(1, 'Name is required')
    .max(100, 'Name must be less than 100 characters'),
  bio: z.string()
    .max(500, 'Bio must be less than 500 characters')
    .optional(),
  website: z.string()
    .url('Please enter a valid URL')
    .optional(),
  avatarUrl: z.string().url().optional()
})

export const loginSchema = z.object({
  email: z.string().email('Please enter a valid email'),
  password: z.string().min(8, 'Password must be at least 8 characters')
})

export const signupSchema = loginSchema.extend({
  name: z.string().min(1, 'Name is required'),
  confirmPassword: z.string()
}).refine((data) => data.password === data.confirmPassword, {
  message: "Passwords don't match",
  path: ['confirmPassword']
})
```

## Utility Types

### Generic Utility Types
```typescript
// Make specific properties optional
export type PartialBy<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>

// Make specific properties required
export type RequireBy<T, K extends keyof T> = T & Required<Pick<T, K>>

// Exclude null and undefined
export type NonNullable<T> = T extends null | undefined ? never : T

// Deep partial type
export type DeepPartial<T> = {
  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P]
}

// Function type for async operations
export type AsyncFunction<T extends any[] = any[], R = any> = (...args: T) => Promise<R>

// Event handler types
export type ClickHandler = (event: React.MouseEvent) => void
export type ChangeHandler<T = string> = (value: T) => void
export type SubmitHandler<T = any> = (data: T) => void | Promise<void>
```

### Database Utility Types
```typescript
// Supabase query types
export type SupabaseQuery<T> = {
  data: T[] | null
  error: any | null
  count?: number | null
}

export type SupabaseSingle<T> = {
  data: T | null
  error: any | null
}

// Database insert/update types
export type InsertType<T> = Omit<T, 'id' | 'createdAt' | 'updatedAt'>
export type UpdateType<T> = Partial<Omit<T, 'id' | 'createdAt'>>
```

## Coding Standards

### Naming Conventions
```typescript
// File naming: kebab-case
// article-editor.tsx
// use-articles.ts
// api-client.ts

// Component naming: PascalCase
export const ArticleEditor: React.FC<ArticleEditorProps> = () => {}

// Hook naming: camelCase starting with 'use'
export const useArticles = () => {}
export const useLocalStorage = () => {}

// Variable/function naming: camelCase
const articleData = []
const handleSubmit = () => {}

// Constant naming: SCREAMING_SNAKE_CASE
const MAX_FILE_SIZE = 5 * 1024 * 1024
const API_ENDPOINTS = {
  ARTICLES: '/api/articles',
  USERS: '/api/users'
}

// Type/Interface naming: PascalCase
interface ArticleProps {}
type UserStatus = 'active' | 'inactive'
enum ErrorCode {}
```

### Import/Export Standards
```typescript
// Prefer named exports for utilities and hooks
export const formatDate = (date: string) => {}
export const useArticles = () => {}

// Use default export for components and pages
export default function ArticlePage() {}

// Group imports logically
import React, { useState, useEffect, useCallback } from 'react'
import { NextPage } from 'next'
import { useRouter } from 'next/router'

import { Button, Input, Modal } from '@/components/ui'
import { ArticleEditor } from '@/components/editor'
import { useArticles, useAuth } from '@/hooks'
import { Article, CreateArticleInput } from '@/types'
import { apiClient } from '@/lib/api'
```

### Function Definition Standards
```typescript
// Prefer function expressions with explicit types for React components
const ArticleEditor: React.FC<ArticleEditorProps> = ({
  article,
  onSave,
  onCancel
}) => {
  // Implementation
}

// Use function declarations for utility functions
export function formatDate(date: string, format: string = 'yyyy-MM-dd'): string {
  // Implementation
}

// Async functions should have explicit return types
export async function createArticle(data: CreateArticleInput): Promise<Article> {
  // Implementation
}

// Use arrow functions for simple event handlers
const handleClick = (event: React.MouseEvent) => {
  // Implementation
}
```

This TypeScript standards guide ensures consistent, type-safe development across the tech-blog-website project.