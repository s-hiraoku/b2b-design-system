# AI Driven Development アーキテクチャ

## 概要

このプロジェクトは、Claude Code を活用した AI Driven Development ワークフローを自動化するシステムです。カスタムコマンドと専門エージェントを組み合わせて、要件定義から実装まで一貫した開発プロセスを提供します。

## アーキテクチャ図

```
┌─────────────────────────────────────────────────────────────┐
│                    AI Driven Development システム                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │   README.md     │    │  ユーザー入力   │                 │
│  │ ワークフロー定義  │    │ プロジェクト説明 │                 │
│  └─────────────────┘    └─────────────────┘                 │
│                                  │                          │
├─────────────────────────────────────────────────────────────┤
│                        コマンド層                            │
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │ /orchestrator   │    │ /spec-driven    │                 │
│  │ 簡易オーケストレーター │    │ 詳細ワークフロー │                 │
│  │                 │    │                 │                 │
│  │   委任 ↓        │    │   分析・実行 ↓   │                 │
│  └─────────────────┘    └─────────────────┘                 │
│                                  │                          │
├─────────────────────────────────────────────────────────────┤
│                       エージェント層                          │
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │ Kiro Steering   │    │ Kiro Spec Init  │                 │
│  │ プロジェクト操舵  │    │ 仕様初期化       │                 │
│  └─────────────────┘    └─────────────────┘                 │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │Kiro Requirements│    │ Kiro Design     │                 │
│  │ 要件定義         │    │ 技術設計         │                 │
│  └─────────────────┘    └─────────────────┘                 │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │ Kiro Tasks      │    │ Kiro Status     │                 │
│  │ タスク分解       │    │ 進捗確認         │                 │
│  └─────────────────┘    └─────────────────┘                 │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                       統合・実行層                           │
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │   MCP統合       │    │   出力生成       │                 │
│  │ DeepWiki/Context7│   │ .kiro/specs/    │                 │
│  │     /Serena     │    │ .kiro/steering/ │                 │
│  └─────────────────┘    └─────────────────┘                 │
└─────────────────────────────────────────────────────────────┘
```

## 4 層アーキテクチャ

### 1. ワークフロー層 (定義)

- **README.md**: 8 段階の開発プロセス定義
- **役割**: 全体的な開発フローの指針

### 2. コマンド層 (インターフェース)

- **orchestrator.md**: シンプルなエントリーポイント
  - 基本的な委任ロジック
  - Kiro Spec Drivden エージェントへの橋渡し
- **spec-driven.md**: 詳細なワークフロー制御
  - プロジェクト状態分析
  - フェーズ別実行制御
  - 承認フロー管理

### 3. エージェント層 (実行)

8 つの専門エージェント：

#### 操舵関連

- **kiro-steering.md**: プロジェクト全体の方向性設定
- **kiro-steering-custom.md**: カスタム操舵ドキュメント生成

#### 仕様開発関連

- **kiro-spec-init.md**: 新機能仕様の初期化
- **kiro-spec-requirements.md**: EARS 形式での要件定義
- **kiro-spec-design.md**: 技術設計書作成
- **kiro-spec-tasks.md**: 実装タスク分解

#### 管理関連

- **kiro-spec-orchestrator.md**: 全体オーケストレーション
- **kiro-spec-status.md**: 進捗・ステータス確認

### 4. 統合・実行層 (支援)

- **MCP 統合**: DeepWiki、Context7、Serena による外部情報取得
- **出力管理**: .kiro/specs/、.kiro/steering/への構造化ファイル生成

## データフロー

```
ユーザー入力 → コマンド層 → エージェント選択 → 実行 → 出力生成
     ↑                                              ↓
     └── フィードバック ← 承認フロー ← ステータス確認 ←┘
```

## フェーズ管理

### 必須フェーズ

1. **Steering** (必須・最優先)
2. **Requirements** (承認必須)
3. **Design** (承認必須)
4. **Tasks** (承認必須)
5. **Implementation** (継続的モニタリング)

### 承認ポイント

- 各フェーズ完了時に人間によるレビューが必要
- スキップ不可の段階的進行
- ステータス確認によるトラッキング

## 技術的特徴

### 専門化

- 各エージェントが特定の責任を持つ
- 専門知識による高品質な出力
- 再利用可能なコンポーネント設計

### 一貫性

- CLAUDE.md による統一されたコンテキスト
- 日本語での応答生成
- 段階的承認によるクオリティ保証

### 拡張性

- MCP server による外部情報統合
- カスタムエージェントの追加可能
- プロジェクト固有の操舵設定

この 4 層アーキテクチャにより、複雑な開発ワークフローを管理しやすい形に分解し、各層が明確な責任を持って連携することで、効率的で品質の高い spec-driven development を実現しています。
